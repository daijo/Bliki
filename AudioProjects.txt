Audio Projects
==============

Few small audio related projects and some notes on their components and their application.

18V Rechargeable Battery Pack
-----------------------------

Built to power my ~CMoy with 18V. ~NiMH constant current charging using LM317. Needs a 24V supply to charge.

![Battery pack](https://farm8.staticflickr.com/7101/7273069136_0627f22cc8_z.jpg)
![Internals](https://farm8.staticflickr.com/7211/7273068364_7982f73796_z.jpg)

### LM317 Linear Voltage Regulator

The LM317 is a variable voltage regulator. In this device it's setup as a constant current regulator. The regulator have three pins, in, out and adjust. The regulator holds 1.25 V between the out and adjust pin. This is used to get the constant current.


          _______    out
    in --| LM317 |--------\
          ---|---         |
             | adjust     -
             |           | |
             |           | | R
             |           | |
             |            -
             |            |
             +------------/
             |
             v i
             |


     Constant current i = 1.25 / R

There is a ~3V voltage drop over the regulator (we'll some heat here, P = 3V * i). That's why we need some extra voltage on the supply compared to the batteries to charge.

I set R to charge the battery in 10 hours (C/10) which is a fairly moderate rate that doesn't require anything more advanced. I usually let it charge over night after a day of use. Seems to work well.


~CMoy Headphone Amplifier
------------------------

Wanted an easy project to build an also had a need for a small headphone amp to use at work.

![CMoy + Battery pack + Trends USB DAC + AKG K404](https://farm8.staticflickr.com/7229/7325781898_0aa2e4212e_z.jpg)
![Internals](https://farm9.staticflickr.com/8014/7325782558_d1225b2974_z.jpg)

### OPA2132PA Operational Amplifier (~OpAmp)

An op-amp sets it's output voltage to the voltage difference between the inputs times a open-loop gain A. This gain is very large so even small difference between the inputs make the op-amp deliver the supply voltage to the output.
            
          Vs+ 
           |
           \
    V+ ---| \
          |  \____ out
    V- ---|  /
          | /
           /
           |
          Vs-

To reduce the gain a negative feedback loop. That is portion of the output voltage is then led back to the inverting input (V-).

This is how it's set up in the CMoy and the inout is put on the non inverting inout pin (V+) making this a non-inverting amplifier.

           Vs+ 
            |
            \
    V+  ---| \
           |  \____ out----+--
    V- +---|  /            |
       |   | /             |
       |    /              |
       |   | Vs-           |
       |             Rf    |
       +-----------|====|--/
       |
       -
      | |
      | | Rg
      | |
       -
       |
      GND


The gain of this amplifier is then G = 1 + Rf/Rg.

### Power supply

To get the supply voltage rails there is a simple voltage divider with a pair of filtering capacitors. The virtual ground is tapped between the two resistors and capacitors.

There are more advanced designs using active components to make a virtual ground that is always exactly between the postive and negative rail. More info about this [here](http://tangentsoft.net/elec/vgrounds.html).

This simple one works well for me. If you want to use a single 9V battery to drive the amp and/or use low impedans headphones you should look further.

Reference:

[Original article by Chu Moy](http://gilmore2.chem.northwestern.edu/projects/showfile.php?file=cmoy2_prj.htm)
[Tutorial by Tangent](http://tangentsoft.net/audio/cmoy-tutorial/)

Elekit PS-3239
--------------

A small amp kit using the TEA2025B chip. Looks pretty much like the design in the datasheet.

The screw terminals wasn't included in the kit but it felt like a good idea adding them. Lesson learned from my CMoy that is basically soldered into its Altoid box never to be moved. Nice with some extra flexibility.

![Completed board](https://farm8.staticflickr.com/7246/7476398620_c69cedf9fd_z.jpg)

Put together as a small and cheap and battery operable stereo system. I got a pair of Fostex full range speakers to use for this purpose. These are good quality drivers so should be able to keep them if I build better amps in the future.

BOM:

* 1 x Elekit PS-3239 stereo amplifier kit (2 x 2.4W into 8 ohm) 1340 JPY
* 1 x 12V/2A wall wart 1200 JPY
* 2 x Fostex P800-E speaker cabinets 2800 JPY / pair
* 2 x Fostex FF85WK full fange drivers 5600 JPY / pair
* Some connectors and a volume knob ~<1000 JPY
* 1 Altoid tin bought in Cambodia $2 incl. mints

Total: ~12000 JPY (mainly for the speakers)

![Testing](https://farm8.staticflickr.com/7253/7476399276_9b0bcac757_z.jpg)

Worked well. Unless you're throwing a party or is in a big room it's powerful enough with these speakers. Audio quality it seem to sound best at about 1/3 of max volume with a 9V battery. Data below on the TEA2025B chip supports that.

![Mounted in Altoid tin](https://farm9.staticflickr.com/8144/7486536968_8a686e11bd_z.jpg)

With the screw terminals on the board the final assembly was a breeze.

### Power supply

The 12V wall wart I got didnt work well. I'm not sure about it's specs. I verified it's isolated but might be unregulated and maybe a switcher. Anyway it makes the amp hum. Will try and make some measurements on it later.

Result was a lot better with a single 9V battery.

### TEA2025B

From data sheet:

> The TEA2025B/D is a monolithic integrated circuit intended for use as dual or bridge power audio amplifier portable radio cassette players.

So not exactly a Hi-Fi amp perhaps.

The power output is a function of speaker impedans and input voltage. In 8 ohm 9V give a maximum of ~1.4W and 12V give 2.4W.

In 8 ohm the THD (Total Harmonic Distortion) take a big jump above 0.4W in output power.

LM1875 based 2x25W stereo ampifier
----------------------------------

Building a small amplifier for the livingroom. Using two K50 PCB kits.

Similar build:

http://www.frontiernet.net/~jff/lm1875/25W_Stereo_Amp_using_LM1875.html

### Powersupply

The amps need a dual power supply (+/- 24V). My first AC to DC power supply build.

Block RKD 80/2x18 80 VA toroidal isolation transformer 2 x 115 V to 2 x 18 V

230/115V selector?

IEC connector with switch and fuse holder. Grounded chassi. Bleeder resistor across filter caps (4 fold the supply power).

In a separate case connected with 3-pin DIN plug.

Attenuator
----------

http://www.8audio-mall.com/servlet/the-382/100K-24-Step-Ladder/Detail

Input selector

### LM1875

http://www.ti.com/product/LM1875


12AU7 + Mosfet Headphone Amplifier
----------------------------------

After the ~CMoy I wanted to build something with a few more parts and also have a look at vacuum tubes and discrete transistors. I found a simple design using a 12AU7 tube and mosfets at [DIY Audio Projects](http://diyaudioprojects.com/Solid/12AU7-IRF510-LM317-Headamp/).

### 12AU7 (ECC82)

This is a twin triode vaccum tube. Triode means it has a cathode, andode and a grid. Twin just mean that there are two in one, i.e. two channels, so only one tube is needed for stereo.

### Mosfet IRF510

LM317 as constant current source (see the battery pack).


Elekit PS-3238 powered by Airport Express 
-----------------------------------------

Bathroom stereo :)

![Completed board](https://farm8.staticflickr.com/7228/7261845812_cf03693cdf_z.jpg)

How will it run on the 5V/100mA from the Airport Express?

LM3875 GAINCLONE
----------------

<http://diyaudioprojects.com/Chip/Nanoo/>
<http://www.ti.com/product/lm3875#feature>

S/PDIF DAC
----------

<http://electronics-diy.com/electronic_schematic.php?id=806>
